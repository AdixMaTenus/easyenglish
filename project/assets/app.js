const translations = {
  kk: {
    nav_home: "Басты бет",
    btn_results: "Менің нәтижелерім",
    login_google: "Google арқылы кіру",
    logout: "Шығу",
    title: "EasyEnglish — оқу және тәжірибе",
    lead: "EasyEnglish сайтына қош келдіңіз! Модульдер арқылы оқып, грамматиканы жаттықыңыз.",
    howto: "<strong>Қалай қолдану керек:</strong><ol><li>Google арқылы кіріңіз (қалауыңызша)</li><li>Модульді таңдаңыз (Module 6, 7, 8 т.б.)</li><li>Оқу мәтіндері немесе грамматика бөлімін таңдаңыз</li><li>Материалдарды оқып, тапсырмаларды орындаңыз</li><li><em>Check Results</em> батырмасын басыңыз</li></ol>",
    meta: "EasyEnglish қазақ, орыс және ағылшын тілдерінде қолжетімді.",
    
    // Module 6 Grammar translations
    grammar_title: "Module 6: Грамматика",
    grammar_lead: "Қарапайым түсіндірмелер және жаттығулар",
    question_types_title: "1. Сұрақ түрлері",
    alt_questions_desc: "<strong>Олар не?</strong> Екі нұсқа арасында таңдау ұсынатын сұрақтар.",
    alt_questions_examples: "<strong>Мысалдар:</strong>",
    tag_questions_desc: "<strong>Олар не?</strong> Ақпаратты растау үшін сөйлем соңына қосылатын қысқа сұрақтар.",
    tag_questions_rule: "<strong>Ереже:</strong> Егер негізгі сөйлем болымды болса → құйрық теріс болады, және керісінше.",
    tag_questions_examples: "<strong>Мысалдар:</strong>",
    tag_questions_remember: "<strong>Есіңізде болсын:</strong> I am → aren't I?",
    passive_title: "2. Пассивтік етіс",
    passive_desc: "Істейтін зат есім әрекетті орындамай, <strong>қабылдаған</strong> кезде.",
    active_who: "(кім әрекет жасайды?)",
    passive_what: "(не істелінеді?)",
    passive_examples: "<strong>Уақыт бойынша мысалдар:</strong>",
    conditionals_title: "3. Шартты сөйлемдер (3-түр)",
    third_conditional_use: "<strong>Қашан қолданамыз?</strong> Өзгерту мүмкін емес өткен туралы айту үшін.",
    third_conditional_explanation: "(Бірақ мен берік оқымадым және емтиханды тапсыра алмадым)",
    more_examples: "<strong>Тағы мысалдар:</strong>",
    third_conditional_tip: "Бұл өткендегі өкініштер мен елестетілген жағдайлар туралы!",
    relative_title: "4. Салыстырмалы шырайлар",
    relative_desc: "<strong>Олар не?</strong> Зат есімді сипаттайтын сөйлемнің бөлігі.",
    table_word: "Сөз",
    table_use: "Қолданылуы",
    table_example: "Мысал",
    who_use: "адамдар",
    which_use: "заттар, жануарлар",
    that_use: "адамдар мен заттар",
    where_use: "орындар",
    simple_check: "<strong>Қарапайым тексеру:</strong>",
    check_people: "Адам туралы ма? → <strong>who</strong>",
    check_thing: "Зат туралы ма? → <strong>which/that</strong>",
    check_place: "Орын туралы ма? → <strong>where</strong>"
  },
  ru: {
    nav_home: "Главная",
    btn_results: "Мои результаты",
    login_google: "Войти через Google",
    logout: "Выйти",
    title: "EasyEnglish — чтение и практика",
    lead: "Добро пожаловать на EasyEnglish! Изучайте модули с текстами и грамматическими упражнениями.",
    howto: "<strong>Как пользоваться:</strong><ol><li>Войдите через Google (по желанию)</li><li>Выберите модуль (Module 6, 7, 8 и т.д.)</li><li>Выберите раздел с текстами или грамматикой</li><li>Читайте материалы и выполняйте задания</li><li>Нажмите <em>Check Results</em></li></ol>",
    meta: "EasyEnglish доступен на русском, казахском и английском.",
    
    // Module 6 Grammar translations
    grammar_title: "Module 6: Грамматика",
    grammar_lead: "Простые объяснения и практические упражнения",
    question_types_title: "1. Типы вопросов",
    alt_questions_desc: "<strong>Что это?</strong> Вопросы, предлагающие выбор между двумя вариантами.",
    alt_questions_examples: "<strong>Примеры:</strong>",
    tag_questions_desc: "<strong>Что это?</strong> Короткие вопросы в конце предложений для подтверждения информации.",
    tag_questions_rule: "<strong>Правило:</strong> Если основное предложение утвердительное → хвостик отрицательный, и наоборот.",
    tag_questions_examples: "<strong>Примеры:</strong>",
    tag_questions_remember: "<strong>Запомни:</strong> I am → aren't I?",
    passive_title: "2. Пассивный залог",
    passive_desc: "Когда подлежащее <strong>получает</strong> действие, а не выполняет его.",
    active_who: "(кто делает действие?)",
    passive_what: "(что делается?)",
    passive_examples: "<strong>Примеры по временам:</strong>",
    conditionals_title: "3. Условные предложения (3 тип)",
    third_conditional_use: "<strong>Когда используем?</strong> Говорим о прошлом, которое уже нельзя изменить.",
    third_conditional_explanation: "(Но я не учил усердно и не сдал экзамен)",
    more_examples: "<strong>Больше примеров:</strong>",
    third_conditional_tip: "Это про сожаления и воображаемые ситуации в прошлом!",
    relative_title: "4. Относительные придаточные",
    relative_desc: "<strong>Что это?</strong> Часть предложения, которая описывает существительное.",
    table_word: "Слово",
    table_use: "Используется для",
    table_example: "Пример",
    who_use: "люди",
    which_use: "вещи, животные",
    that_use: "люди и вещи",
    where_use: "места",
    simple_check: "<strong>Простая проверка:</strong>",
    check_people: "Про человека? → <strong>who</strong>",
    check_thing: "Про вещь? → <strong>which/that</strong>",
    check_place: "Про место? → <strong>where</strong>"
  },
  en: {
    nav_home: "Home",
    btn_results: "My Results",
    login_google: "Sign in with Google",
    logout: "Logout",
    title: "EasyEnglish — Reading & Practice",
    lead: "Welcome to EasyEnglish! Explore modules with reading texts and grammar exercises.",
    howto: "<strong>How to use:</strong><ol><li>Sign in with Google (optional)</li><li>Choose a module (Module 6, 7, 8, etc.)</li><li>Select Reading Texts or Grammar section</li><li>Read materials and complete exercises</li><li>Click <em>Check Results</em></li></ol>",
    meta: "EasyEnglish is available in Kazakh, Russian, and English.",
    
    // Module 6 Grammar translations (English versions)
    grammar_title: "Module 6: Grammar",
    grammar_lead: "Simple explanations and practice exercises",
    question_types_title: "1. Question Types",
    alt_questions_desc: "<strong>What are they?</strong> Questions that offer a choice between two options.",
    alt_questions_examples: "<strong>Examples:</strong>",
    tag_questions_desc: "<strong>What are they?</strong> Short questions added to the end of statements to confirm information.",
    tag_questions_rule: "<strong>Rule:</strong> If the main sentence is positive → the tag is negative, and vice versa.",
    tag_questions_examples: "<strong>Examples:</strong>",
    tag_questions_remember: "<strong>Remember:</strong> I am → aren't I?",
    passive_title: "2. Passive Voice",
    passive_desc: "When the subject <strong>receives</strong> the action instead of performing it.",
    active_who: "(who does the action?)",
    passive_what: "(what is done?)",
    passive_examples: "<strong>Examples by tenses:</strong>",
    conditionals_title: "3. Conditionals Type 3",
    third_conditional_use: "<strong>When do we use it?</strong> To talk about the past that cannot be changed anymore.",
    third_conditional_explanation: "(But I didn't study hard and didn't pass the exam)",
    more_examples: "<strong>More examples:</strong>",
    third_conditional_tip: "This is about regrets and imaginary situations in the past!",
    relative_title: "4. Relative Clauses",
    relative_desc: "<strong>What are they?</strong> Part of a sentence that describes a noun.",
    table_word: "Word",
    table_use: "Used for",
    table_example: "Example",
    who_use: "people",
    which_use: "things, animals",
    that_use: "people and things",
    where_use: "places",
    simple_check: "<strong>Simple check:</strong>",
    check_people: "About a person? → <strong>who</strong>",
    check_thing: "About a thing? → <strong>which/that</strong>",
    check_place: "About a place? → <strong>where</strong>"
  }
};

function setLang(lang) {
  localStorage.setItem("lang", lang);
  applyLang(lang);
  syncFlags(lang);
}

function applyLang(lang) {
  const dict = translations[lang] || translations["kk"];
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    if (dict[key]) el.innerHTML = dict[key];
  });
  syncFlags(lang);
}

function syncFlags(lang) {
  document.querySelectorAll(".lang-btn").forEach(btn => {
    btn.classList.remove("active");
    if (btn.dataset.lang === lang) btn.classList.add("active");
  });
}

document.addEventListener("DOMContentLoaded", () => {
  const saved = localStorage.getItem("lang") || "kk";
  applyLang(saved);
});